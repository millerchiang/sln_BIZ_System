<?xml version="1.0" encoding="utf-8" ?>
<sqlMap namespace="ActivityInfo"
        xmlns="http://ibatis.apache.org/mapping"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <alias>
    <typeAlias alias="ActivityInfoModel" type="prj_BIZ_System.Models.ActivityInfoModel"/>
    <typeAlias alias="NewsModel" type="prj_BIZ_System.Models.NewsModel"/>
    <typeAlias alias="UserInfoToIdAndCpModel" type="prj_BIZ_System.Models.UserInfoToIdAndCpModel"/>
    <typeAlias alias="ActivityRegisterModel" type="prj_BIZ_System.Models.ActivityRegisterModel"/>
    <typeAlias alias="BuyerInfoModel" type="prj_BIZ_System.Models.BuyerInfoModel"/>
    <typeAlias alias="EnterpriseSortAndListModel" type="prj_BIZ_System.Models.EnterpriseSortAndListModel"/>
    <typeAlias alias="ActivityProductSelectModel" type="prj_BIZ_System.Models.ActivityProductSelectModel"/>
    <typeAlias alias="ActivityCatalogSelectModel" type="prj_BIZ_System.Models.ActivityCatalogSelectModel"/>
    <typeAlias alias="ActivityPhotoModel" type="prj_BIZ_System.Models.ActivityPhotoModel"/>
    <typeAlias alias="BannerPhotoModel" type="prj_BIZ_System.Models.BannerPhotoModel"/>
  </alias>
  
  <statements>

    <!--
    [[  table = activity_info
    >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    -->
    <!--查詢全部-->
    <select id="SelectActivityAll" resultMap="ActivityInfo">
      SELECT *
      FROM activity_info a
      LEFT JOIN manager.manager_info m
      ON a.manager_id = m.manager_id
      <dynamic prepend="where">
        <isNotEmpty prepend="and" property="grp_id">
          m.grp_id = $grp_id$
        </isNotEmpty>
      </dynamic>
      ORDER BY starttime DESC
    </select>

    <!--查詢全部-->
    <select id="SelectActivityNotStart" resultMap="ActivityInfo">
      SELECT *
      FROM activity_info a
      LEFT JOIN manager.manager_info m
      ON a.manager_id = m.manager_id
      where a.starttime > now()
      <dynamic prepend="">
        <isNotEmpty prepend="and" property="grp_id">
          m.grp_id = $grp_id$
        </isNotEmpty>
      </dynamic>
      ORDER BY starttime DESC
    </select>
      
    <select id="SelectActivityLimit" parameterType= "int" resultMap="ActivityInfo">
      SELECT *
      FROM activity_info
      WHERE starttime > now()
      ORDER BY starttime DESC Limit $limit$
    </select>


    <!--查詢單筆-->
    <select id="SelectActivityOne" resultMap="ActivityInfo">
      SELECT *
      FROM activity_info
      WHERE activity_id = #activity_id#
    </select>
    
    <!--查詢活動名稱-->
    <select id="SelectActivityName" resultClass="string">
      SELECT DISTINCT activity_name
      FROM activity_info
    </select>
    
    
    <!--新增單筆-->
    <insert id="InsertActivityOne" parameterClass="ActivityInfoModel">
      INSERT INTO activity_info (
      manager_id, activity_type,
      activity_name, starttime, endtime,
      addr, organizer, name, phone,
      email, seller_select, matchmaking_select,
      activity_name_en, addr_en, organizer_en
      ) VALUES (
      #manager_id#,#activity_type#,
      #activity_name#,#starttime#,#endtime#,
      #addr#,#organizer#,#name#,#phone#,
      #email#,#seller_select#,#matchmaking_select#,
      #activity_name_en#,#addr_en#,#organizer_en#
      )
    </insert>
    
    <!--刪除單筆-->
    <delete id="DeleteActivityOne" parameterClass="ActivityInfoModel">
      DELETE FROM activity_info
      WHERE activity_id = #activity_id#
    </delete>
   
    <!--修改單筆-->
    <update id="UpdateActivityOne" parameterClass="ActivityInfoModel">
      UPDATE activity_info
      SET manager_id = #manager_id#,
      activity_type = #activity_type#,
      activity_name = #activity_name#,
      starttime = #starttime#,
      endtime = #endtime#,
      addr = #addr#,
      organizer = #organizer#,
      name = #name#,
      phone = #phone#,
      email = #email#,
      seller_select = #seller_select#,
      matchmaking_select = #matchmaking_select#,
      activity_name_en = #activity_name_en#,
      addr_en = #addr_en#,
      organizer_en = #organizer_en#,
      update_time = #update_time#
      WHERE activity_id = #activity_id#
    </update>
    <!--
    <<<<<<<<<<<<<<<<<<<<<<<<<<<
    ]]
    -->

    <!--
    [[  table = user_info
    >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    --> 
    <!--查詢用戶資訊的帳號和公司名稱-->
    <select id="SelectUserInfoToIdandCp" resultMap="UserInfo">
      select user_id,company
      from user_info
      where id_enable = '1'
    </select>
    <!--
    <<<<<<<<<<<<<<<<<<<<<<<<<<<
    ]]
    -->
  
    <!--
    [[  table = activity_register
    >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    -->
      <!--查詢活動報名審核全部-->
      <select id="SelectActivityCheckAll" resultMap="ActivityRegisterCheck" parameterClass="ActivityRegisterModel">
        SELECT *
        FROM activity_register r
        INNER JOIN user_info u
        ON r.user_id = u.user_id
        INNER JOIN activity_info a
        ON r.activity_id = a.activity_id
        LEFT JOIN manager.manager_info m
        ON a.manager_id = m.manager_id
        <dynamic prepend="where">
          <isNotEqual prepend="and" property="activity_id" compareValue="0">
            r.activity_id  = $activity_id$
          </isNotEqual>
          <isNotEmpty prepend="and" property="company">
            company like '%'||#company#||'%'
          </isNotEmpty>
          <isNotEmpty prepend="and" property="manager_id">
            a.manager_id = #manager_id#
          </isNotEmpty>
          <isNotEmpty prepend="and" property="starttime">
            <![CDATA[starttime >= #starttime# ]]>            
          </isNotEmpty>
          <isNotEmpty prepend="and" property="endtime">
            <![CDATA[endtime <= #endtime# ]]>            
          </isNotEmpty>
          <isNotEmpty prepend="and" property="grp_id">
            m.grp_id = $grp_id$
          </isNotEmpty>
        
      </dynamic>
        ORDER BY r.create_time
      </select>
       
      <!--查詢活動報名單筆-->
      <select id="SelectActivityRegisterOne" resultMap="ActivityRegisterWithUser" parameterClass="ActivityRegisterModel">
        SELECT ar.* , ui.company , ui.company_en, ui.addr, ui.addr_en
        FROM activity_register ar
        LEFT JOIN  user_info ui ON ar.user_id = ui.user_id
        WHERE ar.register_id = #register_id#
      </select>

    <!--查詢活動報名-->
    <select id="SelectActivityRegisterList" resultMap="ActivityRegisterWithUser" parameterClass="ActivityRegisterModel">
      SELECT ar.* , ui.company , ui.company_en
      FROM activity_register ar
      LEFT JOIN  user_info ui ON ar.user_id = ui.user_id
      WHERE ar.activity_id = $activity_id$
    </select>

    <!--查詢活動報名已通過審核-->
    <select id="SelectARCheckPassList" resultMap="ActivityRegisterWithUser" parameterClass="ActivityRegisterModel">
      SELECT ar.* , ui.company , ui.company_en, ui.addr, ui.addr_en
      FROM activity_register ar
      LEFT JOIN  user_info ui ON ar.user_id = ui.user_id
      WHERE ar.activity_id = $activity_id$
      and ar.manager_check = '1'
      order by ar.register_id
    </select>

    <!--查詢活動報名單筆 by activity and user-->
    <select id="SelectActivityRegisterSelectOne" resultMap="ActivityRegister" parameterClass="ActivityRegisterModel">
      SELECT *
      FROM activity_register
      WHERE activity_id = #activity_id# and user_id = #user_id#
    </select>

    <!--新增活動報名單筆-->
      <insert id="InsertActivityRegisterOne" parameterClass="ActivityRegisterModel">
        <selectKey resultClass="int" property="register_id" type="post">
          SELECT currval('registerincrement')
        </selectKey>
        INSERT INTO activity_register (
        activity_id, user_id, quantity,
        name_a, title_a, name_b, title_b, telephone,
        phone, email, manager_check,
        user_info, user_info_en, create_time, update_time
        ) VALUES (
        #activity_id#, #user_id#, #quantity#,
        #name_a#, #title_a#, #name_b#, #title_b#, #telephone#,
        #phone#, #email#, #manager_check#,
        #user_info#, #user_info_en#, #create_time#, #update_time#
        )
      </insert>

    <!--修改活動報名單筆-->
    <update id="UpdateActivityRegisterOne" parameterClass="ActivityRegisterModel">
      UPDATE activity_register
      SET
      quantity = #quantity#,
      name_a = #name_a#,
      title_a = #title_a#,
      name_b = #name_b#,
      title_b = #title_b#,
      telephone = #telephone#,
      phone = #phone#,
      email = #email#,
      user_info = #user_info#,
      user_info_en = #user_info_en#,
      update_time = now()
      WHERE activity_id = #activity_id# and user_id = #user_id#
    </update>

    <!--檢核活動報名單筆審核結果更新-->
      <update id="UpdateActivityRegisterOneChk" parameterClass="ActivityRegisterModel">
        UPDATE activity_register
        SET
        manager_check = #manager_check#,
        update_time = now()
        WHERE register_id = #register_id#
      </update>

      <!--審核結果發送信相關內容-->
      <select id="ActivityRegisterChkMailInfo" parameterClass="ActivityRegisterModel" resultMap="ActivityRegisterChkMailInfo-resultMap">
        select * from activity_register r
        join activity_info i on r.activity_id = i.activity_id
        where r.register_id = #register_id#
      </select>
    
      <!--刪除活動報名單筆-->
      <delete id="DeleteActivityRegisterOne" parameterClass="ActivityRegisterModel">
        DELETE FROM activity_register
        WHERE activity_id = #activity_id# and user_id = #user_id#
      </delete>
    <!--
    <<<<<<<<<<<<<<<<<<<<<<<<<<<
    ]]
    -->

    <!--
    [[  table = news
    >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    -->
      <!--查詢全部-->
      <select id="SelectNewsAll" resultMap="News">
        SELECT *
        FROM news
        <dynamic prepend="where">
          <isNotEmpty prepend="and" property="manager_id">
            manager_id = #manager_id#
          </isNotEmpty>
        </dynamic>
        ORDER BY news_date DESC
      </select>

    <select id="SelectNewsLimit" parameterType= "int" resultMap="News">
      SELECT *
      FROM news
      Where news_style ='1' or news_style ='3'
      ORDER BY news_date DESC Limit $limit$
    </select>

    <select id="SelectNews0Limit" parameterType= "int" resultMap="News">
      SELECT *
      FROM news
      Where news_type = '0' and (news_style ='1' or news_style ='3')
      ORDER BY news_date DESC Limit $limit$
    </select>

    <select id="SelectNews1Limit" parameterType= "int" resultMap="News">
      SELECT *
      FROM news
      Where news_type = '1' and (news_style ='1' or news_style ='3')
      ORDER BY news_date DESC Limit $limit$
    </select>

    <select id="SelectNewsLimit_e" parameterType= "int" resultMap="News">
      SELECT *
      FROM news
      Where news_style ='2' or news_style ='3'
      ORDER BY news_date DESC Limit $limit$
    </select>

    <select id="SelectNews0Limit_e" parameterType= "int" resultMap="News">
      SELECT *
      FROM news
      Where news_type = '0' and (news_style ='2' or news_style ='3')
      ORDER BY news_date DESC Limit $limit$
    </select>

    <select id="SelectNews1Limit_e" parameterType= "int" resultMap="News">
      SELECT *
      FROM news
      Where news_type = '1' and (news_style ='2' or news_style ='3')
      ORDER BY news_date DESC Limit $limit$
    </select>

    <!--查詢某新聞型態清單-->
    <select id="SelectNewsType" resultMap="News1">
      SELECT *
      FROM news bl
      LEFT JOIN activity_info ai
      ON bl.activity_id = ai.activity_id
      LEFT JOIN manager.manager_info m
      ON bl.manager_id = m.manager_id
      <dynamic prepend="where">
        <isNotEmpty prepend="and" property="news_type">
          news_type = #news_type#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="news_style">
          news_style = #news_style#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="grp_id">
          m.grp_id = $grp_id$
        </isNotEmpty>
      </dynamic>
      Order by bl.update_time Desc
    </select>

    <!--查詢某新聞清單-->
    <select id="SelectNewsTypeView" resultMap="News1">
      SELECT *
      FROM news bl
      LEFT JOIN activity_info ai
      ON bl.activity_id = ai.activity_id
      LEFT JOIN manager.manager_info m
      ON bl.manager_id = m.manager_id
      <dynamic prepend="where">
        <isNotEmpty prepend="and" property="news_type">
          news_type = #news_type#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="news_style">
          (news_style = #news_style# or news_style = '3')
        </isNotEmpty>
        <isNotEmpty prepend="and" property="grp_id">
          m.grp_id = $grp_id$
        </isNotEmpty>
      </dynamic>
      Order by bl.update_time Desc
    </select>

    <!--查詢單筆-->
      <select id="SelectNewsOne" resultMap="NewsWithActivity">
        SELECT n.* , ai.starttime
        FROM news n left join activity_info ai on n.activity_id = ai.activity_id
        WHERE news_no = #news_no#
      </select>

      <!--新增單筆-->
      <insert id="InsertNewsOne" parameterClass="NewsModel">
        INSERT INTO news (
        manager_id, news_title, news_date,
        news_type, activity_id,
        website, content, news_style
        ) VALUES (
        #manager_id#, #news_title#, #news_date#,
        #news_type#, #activity_id#,
        #website#, #content#, #news_style#
        )
      </insert>

      <!--刪除單筆-->
      <delete id="DeleteNewsOne" parameterClass="NewsModel">
        DELETE FROM news
        WHERE news_no = #news_no#
      </delete>

      <!--修改單筆-->
      <update id="UpdateNewsOne" parameterClass="NewsModel">
        UPDATE news SET
        manager_id = #manager_id#,
        news_title = #news_title#,
        news_date = #news_date#,
        news_type = #news_type#,
        activity_id = #activity_id#,
        website = #website#,
        content = #content#,
        news_style = #news_style#,
        update_time = now()
        WHERE news_no = #news_no#
      </update>
    <!--
    <<<<<<<<<<<<<<<<<<<<<<<<<<<
    ]]
    -->

    <!--
    [[  table = buyer_list
    >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    -->
      <!--查詢買主資訊全部-->
      <select id="SelectBuyerInfoAll" resultMap="BuyerInfo2">
        SELECT *
        FROM buyer_list bl
        INNER JOIN user_info ui
        ON bl.buyer_id = ui.user_id
        LEFT JOIN activity_info ai
        ON bl.activity_id = ai.activity_id
        LEFT JOIN manager.manager_info m
        ON ai.manager_id = m.manager_id
        <dynamic prepend="where">
          <isNotEmpty prepend="and" property="grp_id">
            m.grp_id = $grp_id$
          </isNotEmpty>
          <isNotEmpty prepend="and" property="endtime">
            ai.endtime >= #endtime#
          </isNotEmpty>
        </dynamic>
       Order by ai.starttime  
      </select>

      <!--查詢某活動買主資訊-->
      <select id="SelectBuyerInfoActivity" resultMap="BuyerInfo1">
        SELECT *
        FROM buyer_list bl
        INNER JOIN user_info ui
        ON bl.buyer_id = ui.user_id
        Where activity_id =#activity_id#
        order by bl.serial_no
      </select>

      <!--查詢買主資訊單筆-->
      <select id="SelectBuyerInfoOne" resultMap="BuyerInfo">
        SELECT *
        FROM buyer_list
        WHERE serial_no = #serial_no#
      </select>
    
      <!--查詢單筆資訊by活動與買主-->
      <select id="SelectBuyerDataByActivityWithId" resultMap="BuyerInfo">
        SELECT *
        FROM buyer_list
        WHERE activity_id = #activity_id#
        AND buyer_id = #buyer_id#
      </select>
    
      <!--新增買主資訊單筆-->
      <insert id="InsertBuyerInfoOne" parameterClass="BuyerInfoModel">
        <selectKey resultClass="int" property="serial_no" type="post">
          SELECT currval('buyerincrement')
        </selectKey>
        INSERT INTO buyer_list (
        activity_id, buyer_id, buyer_need
        ) VALUES (
        #activity_id#, #buyer_id#, #buyer_need#
        )
      </insert>

      <!--刪除買主資訊單筆-->
      <delete id="DeleteBuyerInfoOne" parameterClass="BuyerInfoModel">
        DELETE FROM buyer_list
        WHERE serial_no = #serial_no#
      </delete>
   
      <!--修改買主資訊單筆-->
      <update id="UpdateBuyerInfoOne" parameterClass="BuyerInfoModel">
        UPDATE buyer_list SET
        activity_id = #activity_id#,
        buyer_id = #buyer_id#,
        buyer_need = #buyer_need#
        WHERE serial_no = #serial_no#
      </update>
    <!--
    <<<<<<<<<<<<<<<<<<<<<<<<<<<
    ]]
    -->


    <!--查詢某活動賣主資訊-->
    <select id="SelectSellerInfoActivity" resultMap="SellerInfo">
      SELECT r.*,ui.company,ui.company_en
      FROM activity_register r
      INNER JOIN user_info ui
      ON r.user_id = ui.user_id
      Where r.manager_check='1' and r.activity_id =$activity_id$
    </select>
    
    
    <!--
    [[  table = enterprise_sort
    >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    -->
      <select id="SelectEnterpriseAll" resultMap="EnterpriseSort">
        SELECT sort.user_id, sort.sort_id, list.enterprise_sort_id, list.enterprise_sort_name, list.enterprise_sort_name_en
        FROM enterprise_sort sort
        INNER JOIN enterprise_sort_list list
        ON sort.sort_id = list.sort_id
        ORDER BY sort.user_id;
      </select>

      <select id="SelectEnterpriseByUserId" resultMap="EnterpriseSort">
        SELECT sort.user_id, sort.sort_id, list.enterprise_sort_id, list.enterprise_sort_name, list.enterprise_sort_name_en
        FROM enterprise_sort sort
        INNER JOIN enterprise_sort_list list
        ON sort.sort_id = list.sort_id
        WHERE sort.user_id = #user_id#
        ORDER BY sort.user_id;
      </select>
      
    <!--
    <<<<<<<<<<<<<<<<<<<<<<<<<<<
    ]]
    -->

    <!--
    [[  table = activity_product_select
    >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    -->
      <!--新增活動企業產品選擇單筆-->
      <insert id="InsertActivityProductOne" parameterClass="ActivityProductSelectModel">
        INSERT INTO activity_product_select (
        user_id, activity_id, product_id
        ) VALUES (
        #user_id#, #activity_id#, #product_id#
        )
      </insert>
    
    <!--刪除單一活動企業產品-->
    <delete id="DeleteActivityProductOne" parameterClass="ActivityProductSelectModel">
      DELETE FROM activity_product_select
      WHERE activity_id = #activity_id# and user_id = #user_id#
    </delete>


    <!--選取哪家廠商的哪個活動所選的公司產品-->
      <select id="SelectActivityProductByCondition" resultMap="ActivityProductSelectByCondition" parameterClass="ActivityProductSelectModel">
        SELECT *
        FROM activity_product_select aps
        INNER JOIN product_list pl
        ON aps.product_id = pl.product_id
        WHERE aps.user_id = #user_id#
        AND aps.activity_id = #activity_id#
      </select>
    <!--
    <<<<<<<<<<<<<<<<<<<<<<<<<<<
    ]]
    -->

    <!--
    [[  table = activity_Catalog_select
    >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
    -->
    <!--新增活動企業型錄選擇單筆-->
    <insert id="InsertActivityCatalogOne" parameterClass="ActivityCatalogSelectModel">
      INSERT INTO activity_catalog_select (
      user_id, activity_id, catalog_no
      ) VALUES (
      #user_id#, #activity_id#, #catalog_no#
      )
    </insert>

    <!--刪除單一活動企業型錄-->
    <delete id="DeleteActivityCatalogOne" parameterClass="ActivityCatalogSelectModel">
      DELETE FROM activity_catalog_select
      WHERE activity_id = #activity_id# and user_id = #user_id#
    </delete>

    <!--選取哪家廠商的哪個活動所選的公司型錄-->
    <select id="SelectActivityCatalogByCondition" resultMap="ActivityCatalogSelectByCondition" parameterClass="ActivityCatalogSelectModel">
      SELECT *
      FROM activity_catalog_select aps
      INNER JOIN catalog_list cl
      ON aps.catalog_no = cl.catalog_no
      WHERE aps.user_id = #user_id#
      AND aps.activity_id = #activity_id#
    </select>

    <!--
    <<<<<<<<<<<<<<<<<<<<<<<<<<<
    ]]
    -->

    <!--查詢活動照片全部-->
    <select id="SelectPhotoListByManagerId" parameterClass="ActivityPhotoModel" resultMap="PhotoList-result">
      SELECT *
      FROM activity_photo
      WHERE deleted = '1' and manager_id = #manager_id#
    </select>
    <!--查詢網頁顯示活動照片-->
    <select id="SelectActivityViewPhotoList" resultMap="PhotoList-result">
      SELECT *
      FROM activity_photo
      WHERE deleted = '1' and active = '1'
    </select>
    <!--查詢活動照片單筆-->
    <select id="SelectPhotoByPhotoId" parameterClass="ActivityPhotoModel" resultMap="PhotoList-result">
      SELECT *
      FROM activity_photo
      WHERE photo_id = #photo_id#
    </select>
    <!--假刪除活動照片-->
    <delete id="DeletePhotoListByPhotoIdFake" parameterClass="ActivityPhotoModel">
      UPDATE activity_photo
      SET deleted = '0'
      WHERE photo_id = #photo_id#
    </delete>

    <!--新增活動照片-->
    <insert id="InsertPhotoList" parameterClass="ActivityPhotoModel">
      <selectKey resultClass="int" property="photo_id" type="post">
        SELECT currval('activity_photo_seq')
      </selectKey>
      INSERT INTO public.activity_photo(
      manager_id, photo_time, photo_brief, photo_brief_en,
      photo_info, photo_info_en, photo_pic_site, active,
      deleted)
      VALUES (#manager_id#,#photo_time#,#photo_brief#,#photo_brief_en#
      ,#photo_info#, #photo_info_en#, #photo_pic_site#, #active#
      , #deleted#
      )
    </insert>


    <!--更新活動照片-->
    <update id="UpdatePhotoList" parameterClass="ActivityPhotoModel">
      UPDATE public.activity_photo
      SET manager_id=#manager_id#, photo_time=#photo_time#, photo_brief=#photo_brief#,
      photo_brief_en=#photo_brief_en#, photo_info=#photo_info#, photo_info_en=#photo_info_en#
      <dynamic prepend="">
        <isNotNull prepend="," property="photo_pic_site">
          photo_pic_site=#photo_pic_site#
        </isNotNull>
      </dynamic>
      , active=#active#, deleted=#deleted#
      WHERE photo_id=#photo_id#
    </update>


    <!--更新活動照片-->
    <update id="UpdateBannerList" parameterClass="BannerPhotoModel">
      UPDATE public.banner_photo
      SET manager_id=#manager_id#
      <dynamic prepend="">
        <isNotNull prepend="," property="photo_pic_site">
          photo_pic_site=#photo_pic_site#
        </isNotNull>
      </dynamic>
      , active=#active#, deleted=#deleted#
      WHERE photo_id=#photo_id#
    </update>


    <!--查詢Banner照片全部-->
    <select id="SelectBannerListByManagerId" parameterClass="BannerPhotoModel" resultMap="BannerList-result">
      SELECT *
      FROM banner_photo
      WHERE deleted = '1' and manager_id = #manager_id# ORDER By photo_id DESC
    </select>
    <!--查詢網頁顯示Banner照片-->
    <select id="SelectBannerViewPhotoList" resultMap="BannerList-result">
      SELECT *
      FROM banner_photo
      WHERE deleted = '1' and active = '1'
    </select>
    <!--查詢活動照片單筆-->
    <select id="SelectBannerByPhotoId" parameterClass="BannerPhotoModel" resultMap="BannerList-result">
      SELECT *
      FROM banner_photo
      WHERE photo_id = #photo_id#
    </select>

    <!--新增Banner照片-->
    <insert id="InsertBannerList" parameterClass="BannerPhotoModel">
      <selectKey resultClass="int" property="photo_id" type="post">
        SELECT currval('banner_photo_seq')
      </selectKey>
      INSERT INTO public.banner_photo(
      manager_id, photo_pic_site, active,
      deleted)
      VALUES (#manager_id#, #photo_pic_site#, #active#
      , #deleted#
      )
    </insert>

    <!--假刪除Banner照片-->
    <delete id="DeleteBannerListByPhotoIdFake" parameterClass="BannerPhotoModel">
      UPDATE public.banner_photo
      SET deleted = '0'
      WHERE photo_id = #photo_id#
    </delete>

    
    <update id="UpdateBannerActiveByPhotoId" parameterClass="BannerPhotoModel">
      UPDATE public.banner_photo
      SET active = '1'
      WHERE photo_id = #photo_id#
    </update>

  </statements>

  <resultMaps>
    <resultMap id="ActivityInfo" class="ActivityInfoModel">
      <!--property是Model屬性,column是資料庫欄位名稱-->
      <result property="activity_id" column="activity_id"/>
      <result property="manager_id" column="manager_id"/>
      <result property="activity_type" column="activity_type"/>
      <result property="activity_name" column="activity_name"/>
      <result property="starttime" column="starttime"/>
      <result property="endtime" column="endtime"/>
      <result property="addr" column="addr"/>
      <result property="organizer" column="organizer"/>
      <result property="name" column="name"/>
      <result property="phone" column="phone"/>
      <result property="email" column="email"/>
      <result property="seller_select" column="seller_select"/>
      <result property="matchmaking_select" column="matchmaking_select"/>
      <result property="activity_name_en" column="activity_name_en"/>
      <result property="addr_en" column="addr_en"/>
      <result property="organizer_en" column="organizer_en"/>
      <result property="create_time" column="create_time"/>
      <result property="update_time" column="update_time"/>
    </resultMap>

    <resultMap id="ActivityRegister" class="ActivityRegisterModel">
      <!--property是Model屬性,column是資料庫欄位名稱-->
      <result property="register_id" column="register_id"/>
      <result property="activity_id" column="activity_id"/>
      <result property="user_id" column="user_id"/>
      <result property="quantity" column="quantity"/>
      <result property="name_a" column="name_a"/>
      <result property="title_a" column="title_a"/>
      <result property="name_b" column="name_b"/>
      <result property="title_b" column="title_b"/>
      <result property="telephone" column="telephone"/>
      <result property="phone" column="phone"/>
      <result property="email" column="email"/>
      <result property="manager_check" column="manager_check"/>
      <result property="user_info" column="user_info"/>
      <result property="user_info_en" column="user_info_en"/>
      <result property="create_time" column="create_time"/>
      <result property="update_time" column="update_time"/>
    </resultMap>

    <resultMap id="ActivityRegisterWithUser" class="ActivityRegisterModel">
      <!--property是Model屬性,column是資料庫欄位名稱-->
      <result property="register_id" column="register_id"/>
      <result property="activity_id" column="activity_id"/>
      <result property="user_id" column="user_id"/>
      <result property="quantity" column="quantity"/>
      <result property="name_a" column="name_a"/>
      <result property="title_a" column="title_a"/>
      <result property="name_b" column="name_b"/>
      <result property="title_b" column="title_b"/>
      <result property="telephone" column="telephone"/>
      <result property="phone" column="phone"/>
      <result property="email" column="email"/>
      <result property="manager_check" column="manager_check"/>
      <result property="user_info" column="user_info"/>
      <result property="user_info_en" column="user_info_en"/>
      <result property="create_time" column="create_time"/>
      <result property="update_time" column="update_time"/>
      <result property="company" column="company"/>
      <result property="company_en" column="company_en"/>
      <result property="addr" column="addr"/>
      <result property="addr_en" column="addr_en"/>
    </resultMap>

    <resultMap id="SellerInfo" class="ActivityRegisterModel">
      <!--property是Model屬性,column是資料庫欄位名稱-->
      <result property="register_id" column="register_id"/>
      <result property="activity_id" column="activity_id"/>
      <result property="user_id" column="user_id"/>
      <result property="quantity" column="quantity"/>
      <result property="name_a" column="name_a"/>
      <result property="title_a" column="title_a"/>
      <result property="name_b" column="name_b"/>
      <result property="title_b" column="title_b"/>
      <result property="telephone" column="telephone"/>
      <result property="phone" column="phone"/>
      <result property="email" column="email"/>
      <result property="manager_check" column="manager_check"/>
      <result property="user_info" column="user_info"/>
      <result property="user_info_en" column="user_info_en"/>
      <result property="create_time" column="create_time"/>
      <result property="update_time" column="update_time"/>
      <!--賣家名稱 userInfo-->
      <result property="company" column="company"/>
      <result property="company_en" column="company_en"/>
    </resultMap>
    
    <resultMap id="ActivityRegisterCheck" class="ActivityRegisterModel">
      <!--property是Model屬性,column是資料庫欄位名稱-->
      <result property="register_id" column="register_id"/>
      <result property="activity_id" column="activity_id"/>
      <result property="user_id" column="user_id"/>
      <result property="quantity" column="quantity"/>
      <result property="name_a" column="name_a"/>
      <result property="title_a" column="title_a"/>
      <result property="name_b" column="name_b"/>
      <result property="title_b" column="title_b"/>
      <result property="telephone" column="telephone"/>
      <result property="phone" column="phone"/>
      <result property="email" column="email"/>
      <result property="manager_check" column="manager_check"/>
      <result property="user_info" column="user_info"/>
      <result property="user_info_en" column="user_info_en"/>
      <result property="create_time" column="create_time"/>
      <result property="update_time" column="update_time"/>  
      <!--activityInfo 的 activity_name-->
      <!--userInfo 的 company-->
      <result property="activity_name" column="activity_name"/>
      <result property="starttime" column="starttime"/>
      <result property="endtime" column="endtime"/>
      <result property="company" column="company"/>
    </resultMap>

    <resultMap id="ActivityRegisterChkMailInfo-resultMap" class="ActivityRegisterModel">
      <!--property是Model屬性,column是資料庫欄位名稱-->
      <result property="register_id" column="register_id"/>
      <result property="activity_id" column="activity_id"/>
      <!--<result property="user_id" column="user_id"/>-->
      <result property="quantity" column="quantity"/>
      <!--<result property="name_a" column="name_a"/>-->
      <!--<result property="title_a" column="title_a"/>-->
      <result property="name_b" column="name_b"/>
      <!--<result property="title_b" column="title_b"/>-->
      <!--<result property="telephone" column="telephone"/>-->
      <result property="phone" column="phone"/>
      <result property="email" column="email"/>
      <result property="manager_check" column="manager_check"/>
      <!--<result property="user_info" column="user_info"/>-->
      <!--<result property="user_info_en" column="user_info_en"/>-->
      <!--<result property="create_time" column="create_time"/>-->
      <!--<result property="update_time" column="update_time"/>  -->
      <!--activityInfo 的 activity_name-->
      <!--userInfo 的 company-->
      <result property="activity_name" column="activity_name"/>
      <result property="starttime" column="starttime"/>
      <result property="endtime" column="endtime"/>
      <result property="addr" column="addr"/>
    </resultMap>
    
    <resultMap id="UserInfo" class="UserInfoToIdAndCpModel">
      <!--property是Model屬性,column是資料庫欄位名稱-->
      <result property="user_id" column="user_id"/>
      <result property="company" column="company"/>
    </resultMap>

    <resultMap id="NewsWithActivity" class="NewsModel">
      <!--property是Model屬性,column是資料庫欄位名稱-->
      <result property="news_no" column="news_no"/>
      <result property="manager_id" column="manager_id"/>
      <result property="news_title" column="news_title"/>
      <result property="news_date" column="news_date"/>
      <result property="news_type" column="news_type"/>
      <result property="activity_id" column="activity_id"/>
      <result property="website" column="website"/>
      <result property="content" column="content"/>
      <result property="create_time" column="create_time"/>
      <result property="update_time" column="update_time"/>
      <result property="news_style" column="news_style"/>
      <!--活動開始時間-->
      <result property="starttime" column="starttime"/>
    </resultMap>

    <resultMap id="News" class="NewsModel">
      <!--property是Model屬性,column是資料庫欄位名稱-->
      <result property="news_no" column="news_no"/>
      <result property="manager_id" column="manager_id"/>
      <result property="news_title" column="news_title"/>
      <result property="news_date" column="news_date"/>
      <result property="news_type" column="news_type"/>
      <result property="activity_id" column="activity_id"/>
      <result property="website" column="website"/>
      <result property="content" column="content"/>
      <result property="create_time" column="create_time"/>
      <result property="update_time" column="update_time"/>
      <result property="news_style" column="news_style"/>
    </resultMap>

    <resultMap id="News1" class="NewsModel">
      <!--property是Model屬性,column是資料庫欄位名稱-->
      <result property="news_no" column="news_no"/>
      <result property="manager_id" column="manager_id"/>
      <result property="news_title" column="news_title"/>
      <result property="news_date" column="news_date"/>
      <result property="news_type" column="news_type"/>
      <result property="activity_id" column="activity_id"/>
      <result property="website" column="website"/>
      <result property="content" column="content"/>
      <result property="create_time" column="create_time"/>
      <result property="update_time" column="update_time"/>
      <result property="activity_name" column="activity_name"/>
      <result property="grp_id" column="grp_id"/>
      <result property="news_style" column="news_style"/>
    </resultMap>


    <resultMap id="BuyerInfo" class="BuyerInfoModel">
      <!--property是Model屬性,column是資料庫欄位名稱--> 
      <result property="serial_no" column="serial_no"/>
      <result property="activity_id" column="activity_id"/>
      <result property="buyer_id" column="buyer_id"/>
      <result property="buyer_need" column="buyer_need"/>
    </resultMap>

    <resultMap id="BuyerInfo1" class="BuyerInfoModel">
      <!--property是Model屬性,column是資料庫欄位名稱-->
      <result property="serial_no" column="serial_no"/>
      <result property="activity_id" column="activity_id"/>
      <result property="buyer_id" column="buyer_id"/>
      <result property="buyer_need" column="buyer_need"/>
      <result property="company" column="company"/>
      <result property="company_en" column="company_en"/>
    </resultMap>

    <resultMap id="BuyerInfo2" class="BuyerInfoModel">
      <!--property是Model屬性,column是資料庫欄位名稱-->
      <result property="serial_no" column="serial_no"/>
      <result property="activity_id" column="activity_id"/>
      <result property="buyer_id" column="buyer_id"/>
      <result property="buyer_need" column="buyer_need"/>
      <result property="activity_name" column="activity_name"/>
      <result property="company" column="company"/>
      <result property="activity_name_en" column="activity_name_en"/>
      <result property="company_en" column="company_en"/>
    </resultMap>


    <resultMap id="EnterpriseSort" class="EnterpriseSortAndListModel">
      <!--property是Model屬性,column是資料庫欄位名稱--> 
      <result property="user_id" column="user_id"/>
      <result property="sort_id" column="sort_id"/>
      <result property="enterprise_sort_id" column="enterprise_sort_id"/>
      <result property="enterprise_sort_name" column="enterprise_sort_name"/>
      <result property="enterprise_sort_name_en" column="enterprise_sort_name_en"/>
    </resultMap>

    <resultMap id="ActivityProductSelect" class="ActivityProductSelectModel">
      <!--property是Model屬性,column是資料庫欄位名稱--> 
      <result property="serial_no" column="serial_no"/>
      <result property="user_id" column="user_id"/>
      <result property="activity_id" column="activity_id"/>
      <result property="product_id" column="product_id"/>
    </resultMap>

    <resultMap id="ActivityProductSelectByCondition" class="ActivityProductSelectModel">
      <!--property是Model屬性,column是資料庫欄位名稱-->
      <result property="serial_no" column="serial_no"/>
      <result property="user_id" column="user_id"/>
      <result property="activity_id" column="activity_id"/>
      <result property="product_id" column="product_id"/>
      <!--productlist 的 product_name, product_info-->
      <result property="product_name" column="product_name"/>
      <result property="product_info" column="product_info"/>
    </resultMap>

    <resultMap id="ActivityCatalogSelect" class="ActivityCatalogSelectModel">
      <!--property是Model屬性,column是資料庫欄位名稱-->
      <result property="serial_no" column="serial_no"/>
      <result property="user_id" column="user_id"/>
      <result property="activity_id" column="activity_id"/>
      <result property="catalog_no" column="catalog_no"/>
    </resultMap>

    <resultMap id="ActivityCatalogSelectByCondition" class="ActivityCatalogSelectModel">
      <!--property是Model屬性,column是資料庫欄位名稱-->
      <result property="serial_no" column="serial_no"/>
      <result property="user_id" column="user_id"/>
      <result property="activity_id" column="activity_id"/>
      <result property="catalog_no" column="catalog_no"/>
      <result property="catalog_name" column="catalog_name"/>
      <!--cataloglist 的 cover_file, catalog_file-->
      <result property="cover_file" column="cover_file"/>
      <result property="catalog_file" column="catalog_file"/>
    </resultMap>

    <resultMap id="PhotoList-result" class="ActivityPhotoModel">
      <result property="photo_id" column="photo_id"/>
      <result property="manager_id" column="manager_id"/>
      <result property="photo_time" column="photo_time"/>
      <result property="photo_brief" column="photo_brief"/>
      <result property="photo_brief_en" column="photo_brief_en"/>
      <result property="photo_info" column="photo_info"/>
      <result property="photo_info_en" column="photo_info_en"/>
      <result property="photo_pic_site" column="photo_pic_site"/>
      <result property="active" column="active"/>
      <result property="deleted" column="deleted"/>
    </resultMap>

    <resultMap id="BannerList-result" class="BannerPhotoModel">
      <result property="photo_id" column="photo_id"/>
      <result property="manager_id" column="manager_id"/>
      <result property="photo_pic_site" column="photo_pic_site"/>
      <result property="active" column="active"/>
      <result property="deleted" column="deleted"/>
    </resultMap>

  </resultMaps>
  
</sqlMap>
        
 
