@using prj_BIZ_System.Models
@model prj_BIZ_System.Models.Message_ViewModel


@{
    ViewBag.Title = "私人訊息列表";
}

@section pagestyle{
    <link href="/stylesheets/sys.css" rel="stylesheet" />
}

@Styles.Render("~/Content/css/jqueryUI")

<div class="article_col1">
    <div class="form_box">
        <h2>私人訊息</h2>
        <form id="form" action="@Url.Action("MessagePrivateList")" method="GET">
            <input type="text" name="keyword" placeholder="請輸入查詢條件" value="@ViewBag.keyword">
            <a id="searchBtn" href="javascript:void(0)" class="addbublue magb10">查詢</a>
            <a href="@Url.Action("PrivateAdd")" class="addbu rightbox">新增</a>
        </form>
        <table class="edittable">
            <tr>
                <th>編號</th>
                <th style="width: 50%">主題</th>
                <th>發佈人</th>
                <th>回覆數</th>
                <th>發佈日</th>
                <th>內容</th>
            </tr>
            @{ 
                var prevCounts = ((PageList<MsgPrivateModel>)TempData["PageList"]).prevCounts;
            }
            @if (Model.msgPrivateList != null)
            {
                var i = 0;
                foreach(MsgPrivateModel md in Model.msgPrivateList)
                {
                    <tr class="active">
                        <td>@((++i)+prevCounts)</td>
                        <td class="alignleft">
                            @md.msg_title
                        </td>
                        <td>
                            @md.company
                        </td>
                        <td>
                            @md.rpy_cnt
                        </td>
                        <td>
                            @md.create_time.ToString("yyyy/MM/dd")
                        </td>
                        <td>
                            <div class="centerbox">
                                <a href="/Message/PrivateDetailed?msg_no=@(md.msg_no)" class="editbu">內容</a>
                            </div>
                        </td>
                    </tr>
                }
            }
        </table>
        @Html.PagesList((PageList<MsgPrivateModel>)TempData["PageList"])
    </div>
</div>

@Scripts.Render("~/bundles/jqueryUI")

<script>
    $(function () {

        $("#searchBtn").click(function () {
            $("#form").submit();
        });

	    $( "#tabs" ).tabs();
	   	$(".groupmenu").on('click',function(){
				$(".datalist3").toggle();
				$(this).toggleClass("active");
	   	})

        @if (!string.IsNullOrEmpty((string)TempData["priDetailView_errmsg"]))
	   	{
            <text>
            function check() {
                var pw_errMsg = '@TempData["priDetailView_errmsg"]';
                if (pw_errMsg != '')
	   	        {
                    alert(pw_errMsg);
	   	        }
	   	    }
	   	    check();
	    	</text>
        }

        
    });

</script>