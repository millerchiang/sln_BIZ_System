@{
    ViewBag.Title = "Login";
}

@section pagestyle{
    <link href="/stylesheets/login.css" rel="stylesheet" />
}

<div class="loginbox">
    <form action="~/Home/IdentifyUser">
        <ul class="loginboxR">
            <li>
                <label for="">帳號:</label>
                <input type="text" name="user_id" text=""><br>
            </li>
            <li>
                <label for="">密碼:</label>
                <input type="text" name="user_pw" text=""><br>
            </li>
            <li>
                <a href="/Home/ForgetPassword" class="loginbox_fpw">忘記密碼</a>
            </li>
        </ul>
        <button class="loginbox_submit" type="submit"> 登入 </button>
    </form>
    <p>
        <span class="fontRed">*</span>帳號為貴公司統一編號 <br>
        <span class="fontRed">*</span>密碼請設8個字元的英文及數字組合 <br>
        <span class="fontRed">*</span>第一次登入密碼預設為統編，登入後須立即更改密碼，且符合密碼規則
    </p>
    <a href="/User/Register?user_id=new" class="loginbox_newid">創造新帳號 </a>

</div>

<script>
    $(function () {
        loadData();
    });

    function loadData (){
        $.ajax({
            type: "GET",
            url: "@Url.Action("MailValidateResult", "Home")",
            cache: false,
            dataType: "json",
            success: function (msg) {
                if (msg != '') {
                    alert(msg);
                }
            }
        });
    }


    $(function() {
         @if (!string.IsNullOrEmpty((string)TempData["fp_errMsg"]))
         {
            <text>
            function check() {
                var pw_errMsg = '@TempData["fp_errMsg"]';
                if (pw_errMsg != '')
                 {
                      alert(pw_errMsg);
                 }
            }
            check();
            </text>
        }

        $("#form").submit(function () {
            var user_id = $("input[name='user_id']").val();
            var email = $("input[name='email']").val();
            var errMsg = checkValidationOk(user_id, email);
            if (errMsg != '') {
                alert(errMsg);
                return false;
            }
        });

    });

    function checkValidationOk(user_id, email) {
        var errMsg = '';
        if (user_id == null || user_id == '') {
            errMsg += '帳號不可為空白\n';
        }
        if (email == null || email == '') {
            errMsg += 'E-mail不可為空白\n';
        }

        return errMsg;
    }


</script>